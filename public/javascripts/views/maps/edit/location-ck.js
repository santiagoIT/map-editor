define(["jquery","Underscore","backbone","text!views/maps/edit/location.html","biz/mapStateSingleton"],function(e,t,n,r,i){var s=n.View.extend({events:{"click .showLocation":"showLocation","click .removeLocation":"removeLocation","click .goToLocation":"goToLocation","click .setLocation":"setLocation"},template:t.template(r),tagName:"tr",initialize:function(e,t){this.model=e;this.mapId=t;this.bindTo(this.model,"change:all",this.render)},render:function(){this.$el.html(this.template({item:this.model.toJSON(),mapId:this.mapId}));return this},showLocation:function(e){var t=this.model.get("node");i.set("selectedNode",t);return!1},setLocation:function(){var e=i.get("selectedNode");if(e){this.model.set("node",e);this.model.save()}return!1},goToLocation:function(){console.log("target");console.log(this.model.get("node"));i.set("targetNode",this.model.get("node"));return!1},removeLocation:function(e){var t=this;require(["biz/deleteConfirm"],function(e){e("Location: "+t.model.get("name"),function(e){e.destroy({success:function(){}})},t.model)});return!1}});return s});